angular.module("school_erp",["ui.router","720kb.datepicker","ngDialog"]).run(function($rootScope,$state,authService){$rootScope.loginPage=false;$rootScope.role="teacher";$rootScope.$on("$stateChangeStart",function(event,toState,toParams){var requireLogin=toState.data.requireLogin;if(requireLogin&&authService.getUserInfo()==null){$rootScope.authenticated=false;event.preventDefault();return $state.go("login")}})});angular.module("school_erp").config(function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("login",{url:"/login",templateUrl:"app/components/login/login.html",controller:"loginController",data:{requireLogin:false}}).state("main",{url:"/",views:{"":{templateUrl:"app/components/shared/main.html"},"header@main":{templateUrl:"app/components/shared/header.html",controller:"headController"},"sidebar@main":{templateUrl:"app/components/shared/sidebar.html",controller:"sideController"},"footer@main":{templateUrl:"app/components/shared/footer.html"}},data:{requireLogin:true}}).state("main.dashboard",{url:"dashboard",templateUrl:"app/components/dashboard/dashboard.html",data:{requireLogin:true}}).state("main.studentAdmission",{url:"studentInfo/studentAdmission",templateUrl:"app/components/studentAdmission/studentAdmission.html",controller:"studentAdmissionController",data:{requireLogin:true}}).state("main.student",{url:"studentInfo/student",templateUrl:"app/components/student/student.html",controller:"studentController",data:{requireLogin:true}}).state("main.employee",{url:"employeeInfo/employee",templateUrl:"app/components/employee/employee.html",controller:"employeeController",data:{requireLogin:true}}).state("main.employeeDetails",{url:"employeeInfo/employeeDetails",templateUrl:"app/components/employeeDetails/employeeDetails.html",controller:"employeeDetailsController",data:{requireLogin:true}}).state("main.employeeAttendance",{url:"employeeInfo/employeeAttendance",templateUrl:"app/components/employeeAttendance/employeeAttendance.html",controller:"employeeAttendanceController",data:{requireLogin:true}}).state("main.studentAttendance",{url:"attendance/studentAttendance",templateUrl:"app/components/studentAttendance/studentAttendance.html",controller:"studentAttendanceController",data:{requireLogin:true}}).state("main.subjects",{url:"academics/subjects",templateUrl:"app/components/subjects/subjects.html",controller:"subjectsController",data:{requireLogin:true}}).state("main.chapters",{url:"academics/chapters",templateUrl:"app/components/chapters/chapters.html",controller:"chaptersController",data:{requireLogin:true}}).state("main.assignSubjects",{url:"academics/assignSubjects",templateUrl:"app/components/assignSubjects/assignSubjects.html",controller:"assignSbjectsController",data:{requireLogin:true}}).state("main.assignments",{url:"academics/assignments",templateUrl:"app/components/assignments/assignments.html",controller:"assignmentsController",data:{requireLogin:true}}).state("main.examSchedules",{url:"examination/examSchedules",templateUrl:"app/components/examSchedules/examSchedules.html",controller:"examSchedulesController",data:{requireLogin:true}}).state("main.examPapers",{url:"examination/examPapers",templateUrl:"app/components/examPapers/examPapers.html",controller:"examPapersController",data:{requireLogin:true}}).state("main.evaluations",{url:"examination/evaluations",templateUrl:"app/components/evaluations/evaluations.html",controller:"evaluationsController",data:{requireLogin:true}}).state("main.classWise",{url:"timetable/classWise",templateUrl:"app/components/classWise/classWise.html",controller:"classWiseController",data:{requireLogin:true}}).state("main.teacherWise",{url:"timetable/teacherWise",templateUrl:"app/components/teacherWise/teacherWise.html",data:{requireLogin:true}}).state("main.schoolEvents",{url:"timetable/schoolEvents",templateUrl:"app/components/schoolEvents/schoolEvents.html",data:{requireLogin:true}}).state("main.onlineNoticeBoard",{url:"timetable/onlineNoticeBoard",templateUrl:"app/components/onlineNoticeBoard/onlineNoticeBoard.html",data:{requireLogin:true}}).state("main.libraryRules",{url:"library/libraryRules",templateUrl:"app/components/libraryRules/libraryRules.html",data:{requireLogin:true}}).state("main.addBook",{url:"library/addBook",templateUrl:"app/components/addBook/addBook.html",controller:"addBookController",data:{requireLogin:true}}).state("main.bookList",{url:"library/bookList",templateUrl:"app/components/bookList/bookList.html",controller:"bookListController",data:{requireLogin:true}}).state("main.addStation",{url:"transport/addStation",templateUrl:"app/components/addStation/addStation.html",controller:"addStationController",data:{requireLogin:true}}).state("main.addBusRoute",{url:"transport/addBusRoute",templateUrl:"app/components/addBusRoute/addBusRoute.html",controller:"BusRouteController",data:{requireLogin:true}}).state("main.routeGeolocation",{url:"transport/routeGeolocation",templateUrl:"app/components/routeGeolocation/routeGeolocation.html",controller:"routeGeoLocationController",data:{requireLogin:true}}).state("main.addVehicle",{url:"transport/addVehicle",templateUrl:"app/components/addVehicle/addVehicle.html",controller:"addVehicleController",data:{requireLogin:true}});$urlRouterProvider.otherwise("/login")});angular.module("school_erp").controller("addBookController",["$http","$scope","addBookServices","ngDialog","globalServices","subjectsServices",function($http,$scope,addBookServices,ngDialog,globalServices,subjectsServices){$scope.data=[];$scope.today1="01/01/2000";globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){$scope.secId=[];globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.populateSubjects($scope.secId)}).error(function(data,success){$scope.populateSubjects($scope.secId)})};$scope.populateSubjects=function(secId){$scope.subData=[];subjectsServices.getSubjects(secId).success(function(data,status){$scope.subData=data.subjects;$scope.subId=$scope.subData[0].subject_id;$scope.getChapters($scope.subId)}).error(function(data,success){})};$scope.addBook=function(data){var bookDetails={book_title:$scope.data.book_title,author_name:$scope.data.author_name,book_price:$scope.data.book_price,qty:$scope.data.qty,rack_number:$scope.data.rack_number,inward_date:$scope.data.inward_date,book_description:$scope.data.book_description,subject:$scope.data.subject};addBookServices.setBook(bookDetails).success(function(data,status){ngDialog.open({template:"<p>Books are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getBook()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})}}]);angular.module("school_erp").factory("addBookServices",["$http","globalServices",function($http,globalServices){var addBookServices={};addBookServices.getBook=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/book/SCH-9271"})};addBookServices.setBook=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/book/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};addBookServices.EditBook=function(dataValue){console.log(dataValue);return $http({method:"EDIT",url:globalServices.globalValue.baseURL+"book_edit/:book_id/:name/:value",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addBookServices}]);angular.module("school_erp").controller("BusRouteController",["$http","$scope","BusRouteServices","ngDialog","addStationServices","globalServices","addVehicleServices",function($http,$scope,BusRouteServices,ngDialog,addStationServices,globalServices,addVehicleServices){$scope.data=[];$scope.getBusRoute=function(){BusRouteServices.getBusRoute().success(function(data,status){$scope.busRoutes=data.bus_routes;$scope.routeId=$scope.busRoutes[0].route_id}).error(function(data,success){})};addStationServices.getStation().success(function(data,status){$scope.stations=data.stations}).error(function(data,success){});$scope.addBusRoute=function(data){var StationDetails={route_title:$scope.data.route_title,vehicle_code:$scope.data.vehicle_code,station:$scope.data.station,pickup_time:$scope.data.pickup_time,drop_time:$scope.data.drop_time};BusRouteServices.setBusRoute(StationDetails).success(function(data,status){ngDialog.open({template:"<p>Stations are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getBusRoute()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.EditBusRoute=function(editdata){var StationDetails={route_title:$scope.data.route_title,vehicle_code:$scope.data.vehicle_code,vehicle_number:$scope.data.vehicle_number};BusRouteServices.EditBusRoute(StationDetails).success(function(data,status){ngDialog.open({template:"<p>Routes are Edited Successfully.</p>",plain:true});$scope.examData=[];$scope.getBusRoute()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.addTime=function(data){var TimeDetails={pickup_time:$scope.data.pickup_time,dropping_time:$scope.data.dropping_time};BusRouteServices.setTime(TimeDetails,$scope.routeId,$scope.stationId).success(function(data,status){ngDialog.open({template:"<p> BusRoutes are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getBusRoute()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)};addVehicleServices.getVehicle().success(function(data,status){$scope.vehicles=data.vehicles}).error(function(data,success){});$scope.getBusRoute()}]);angular.module("school_erp").factory("BusRouteServices",["$http","globalServices",function($http,globalServices){var BusRouteServices={};BusRouteServices.getBusRoute=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/bus_route/SCH-9271"})};BusRouteServices.setBusRoute=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/bus_route/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};BusRouteServices.getTime=function(routeId,stationId){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/station_to_bus_route/"+routeId+"/"+stationId})};BusRouteServices.setTime=function(dataValue,routeId,stationId){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/station_to_bus_route/"+routeId+"/"+stationId,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};BusRouteServices.EditBusRoute=function(dataValue){console.log(dataValue);return $http({method:"EDIT",url:globalServices.globalValue.baseURL+"",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return BusRouteServices}]);angular.module("school_erp").controller("addStationController",["$http","$scope","addStationServices","ngDialog",function($http,$scope,addStationServices,ngDialog){$scope.data=[];$scope.getStation=function(){addStationServices.getStation().success(function(data,status){$scope.data=data.stations}).error(function(data,success){})};$scope.addStation=function(data){var StationDetails={station_name:$scope.data.station_name,station_code:$scope.data.station_code,station_geo_location:$scope.data.station_geo_location};addStationServices.setStation(StationDetails).success(function(data,status){ngDialog.open({template:"<p>Station is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getStation()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.EditStation=function(editdata){var StationDetails={station_name:$scope.editdata.station_name,station_code:$scope.editdata.station_code,station_geo_location:$scope.editdata.station_geo_location};addStationServices.EditStation(bookDetails).success(function(data,status){ngDialog.open({template:"<p>station is Edited Successfully.</p>",plain:true});$scope.editdata=[];$scope.getStation()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getStation()}]);angular.module("school_erp").factory("addStationServices",["$http","globalServices",function($http,globalServices){var addStationServices={};addStationServices.getStation=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/transport_stations/SCH-9271"})};addStationServices.setStation=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/transport_stations/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};addStationServices.EditStation=function(dataValue){console.log(dataValue);return $http({method:"EDIT",url:globalServices.globalValue.baseURL+"",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addStationServices}]);angular.module("school_erp").controller("addVehicleController",["$http","$scope","addVehicleServices","ngDialog",function($http,$scope,addVehicleServices,ngDialog){$scope.vehicles=[];$scope.data=[];$scope.getVehicle=function(){addVehicleServices.getVehicle().success(function(data,status){$scope.vehicles=data.vehicles}).error(function(data,success){})};$scope.addVehicle=function(data){var VehicleDetails={vehicle_code:$scope.data.vehicle_code,vehicle_name:$scope.data.vehicle_name};addVehicleServices.setVehicle(VehicleDetails).success(function(data,status){ngDialog.open({template:"<p>Vehicle is Added Successfully.</p>",plain:true});$scope.data=[];$scope.getVehicle()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getVehicle()}]);angular.module("school_erp").factory("addVehicleServices",["$http","globalServices",function($http,globalServices){var addVehicleServices={};addVehicleServices.getVehicle=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/vehicles/SCH-9271"})};addVehicleServices.setVehicle=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/vehicles/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return addVehicleServices}]);angular.module("school_erp").controller("assignmentsController",["$http","$scope","globalServices","subjectsServices","assignmentsServices","chaptersServices","ngDialog",function($http,$scope,globalServices,subjectsServices,assignmentsServices,chaptersServices,ngDialog){$scope.data=[];$scope.chapterId="";globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){$scope.secId=[];globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.populateSubjects($scope.secId)}).error(function(data,success){$scope.populateSubjects($scope.secId)})};$scope.populateSubjects=function(secId){$scope.subData=[];subjectsServices.getSubjects(secId).success(function(data,status){$scope.subData=data.subjects;$scope.subId=$scope.subData[0].subject_id;$scope.populateChapters($scope.subId)}).error(function(data,success){})};$scope.populateChapters=function(subId){chaptersServices.getChapters(subId).success(function(data,status){console.log(subId);$scope.chapterData=data[subId+""];$scope.chapterId=$scope.chapterData[0].lesson_id;$scope.getAssignments($scope.chapterId)}).error(function(data,success){})};$scope.getAssignments=function(chapterId){console.log($scope.chapterId);assignmentsServices.getAssignments($scope.chapterId,$scope.secId).success(function(data,status){console.log(status);$scope.assignmentsData=data.assignments}).error(function(data,success){})};$scope.addAssignments=function(data){console.log($scope.chapterId+"lesson");var assignDetails={assignment_title:$scope.data.assignment_title,due_date:$scope.data.due_date,description:$scope.data.description};assignmentsServices.setAssignments(assignDetails,$scope.chapterId,$scope.secId).success(function(data,status){ngDialog.open({template:"<p>Assignments are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getAssignments()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").factory("assignmentsServices",["$http","globalServices",function($http,globalServices){var assignmentsServices={};assignmentsServices.getAssignments=function(lessonId,sectionId){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/assignment/"+lessonId+"/"+sectionId})};assignmentsServices.setAssignments=function(dataValue,lessonId,sectionId){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/assignment/"+lessonId+"/"+sectionId,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return assignmentsServices}]);angular.module("school_erp").factory("assignServices",["$http","globalServices",function($http,globalServices){var assignServices={};assignServices.setTeacher=function(dataValue,teacherId){console.log(dataValue,teacherId);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/add_subjects_to_teacher/"+teacherId,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return assignServices}]);angular.module("school_erp").controller("assignSbjectsController",["$http","$scope","assignServices","ngDialog","globalServices","subjectsServices","employeeServices",function($http,$scope,assignServices,ngDialog,globalServices,subjectsServices,employeeServices){$scope.employeeData=[];$scope.data={};$scope.teachId="";globalServices.getClass().success(function(data,status){$scope.classDatanew=data.school_classes;$scope.classId=$scope.classDatanew[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.getSubjects($scope.secId)}).error(function(data,success){})};$scope.getSubjects=function(secId){subjectsServices.getSubjects(secId).success(function(data,status){$scope.subjectsData=data.subjects;$scope.subjectId=$scope.subjectsData[0].subject_id}).error(function(data,success){})};$scope.getSubName=function(subid){console.log(subid);$scope.employeeData.forEach(function(ele){if(ele.subject_id==subid){return ele.name}})};employeeServices.getEmployee().success(function(data,status){console.log(data);$scope.employeeData=data.employee}).error(function(data,success){});$scope.addTeacher=function(data){var someVal=JSON.parse($scope.data.subjectObj);var teacherDetails={subject_id:someVal.subject_id,subject_name:someVal.name};console.log(teacherDetails);assignServices.setTeacher(teacherDetails,$scope.data.teachId).success(function(data,status){ngDialog.open({template:"<p>ExamPapers are Added Successfully.</p>",plain:true});$scope.data=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)};$scope.getSubjects()}]);angular.module("school_erp").controller("bookListController",["$http","$scope","addBookServices",function($http,$scope,addBookServices){$scope.data=[];addBookServices.getBook().success(function(data,status){$scope.data=data.books}).error(function(data,success){});$scope.EditBook=function(value){$scope.editdata=angular.copy($scope.data[value])}}]);angular.module("school_erp").controller("chaptersController",["$http","$scope","chaptersServices","globalServices","subjectsServices","ngDialog",function($http,$scope,chaptersServices,globalServices,subjectsServices,ngDialog){$scope.chapterData=[];$scope.data=[];globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){$scope.secId=[];globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.populateSubjects($scope.secId)}).error(function(data,success){$scope.populateSubjects($scope.secId)})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)};$scope.populateSubjects=function(secId){$scope.subData=[];subjectsServices.getSubjects(secId).success(function(data,status){$scope.subData=data.subjects;$scope.subId=$scope.subData[0].subject_id;$scope.getChapters($scope.subId)}).error(function(data,success){})};$scope.getChapters=function(subId){chaptersServices.getChapters(subId).success(function(data,status){console.log(subId);$scope.chaptersData=data[subId+""]}).error(function(data,success){})};$scope.addChapters=function(data){var chapterDetails={title:$scope.data.title,code:$scope.data.code,no_of_topics:$scope.data.no_of_topics,description:$scope.data.description};chaptersServices.setChapters(chapterDetails,$scope.subId).success(function(data,status){ngDialog.open({template:"<p>Chapters are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getChapters($scope.subId)}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})}}]);angular.module("school_erp").factory("chaptersServices",["$http","globalServices",function($http,globalServices){var chaptersServices={};chaptersServices.getChapters=function(subjectId){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/course_works/"+subjectId})};chaptersServices.setChapters=function(dataValue,subjectId){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/course_works/"+subjectId,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return chaptersServices}]);angular.module("school_erp").controller("classWiseController",["$http","$scope","globalServices","subjectsServices",function($http,$scope,globalServices,subjectsServices){$scope.data=[];globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){$scope.secId=[];globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.populateSubjects($scope.secId)}).error(function(data,success){$scope.populateSubjects($scope.secId)})};$scope.populateSubjects=function(secId){$scope.subData=[];subjectsServices.getSubjects(secId).success(function(data,status){$scope.subData=data.subjects;$scope.subId=$scope.subData[0].subject_id;$scope.getChapters($scope.subId)}).error(function(data,success){})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").controller("employeeController",["$http","$scope","employeeServices",function($http,$scope,employeeServices){$scope.employeeData=[];$scope.editdata=[];employeeServices.getEmployee().success(function(data,status){$scope.employeeData=data.employee}).error(function(data,success){});$scope.EditEmployee=function(value){$scope.editdata=angular.copy($scope.employeeData[value])}}]);angular.module("school_erp").factory("employeeServices",["$http","globalServices",function($http,globalServices){var employeeService={};employeeService.getEmployee=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/employee/SCH-9271"})};employeeService.setEmployee=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/employee/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};employeeService.setAttendance=function(dataValue,Attendance){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/employee_attendance/"+Attendance,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return employeeService}]);angular.module("school_erp").controller("employeeAttendanceController",["$http","$scope","employeeServices","ngDialog",function($http,$scope,employeeServices,ngDialog){$scope.employeeData=[];employeeServices.getEmployee().success(function(data,status){$scope.employeeData=data.employee}).error(function(data,success){});$scope.addAttendance=function(employee,status){var Attendance={session:"morning",status:status};employeeServices.setAttendance(Attendance,employee.employee_id).success(function(data,status){ngDialog.open({template:"<p> Employee Attendance  submitted successfully </p>",plain:true});$scope.data=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})}}]);angular.module("school_erp").controller("employeeDetailsController",["$http","$scope","employeeServices","ngDialog",function($http,$scope,employeeServices,ngDialog){$scope.employeeDetailsData=[];$scope.data=[];$scope.today1="01/01/1975";$scope.addEmployee=function(data){var empDetails={first_name:$scope.data.first_name,last_name:$scope.data.last_name,dob:$scope.data.dob,job_category:$scope.data.jobType,experience:$scope.data.experience,phone:$scope.data.phone,email:$scope.data.email,profile_image:"imageData",website:$scope.data.website,joined_on:$scope.data.joined_on,gender:$scope.data.gender,experience:$scope.data.experience,website:$scope.data.website,qualification:$scope.data.qualification};employeeServices.setEmployee(empDetails).success(function(data,status){ngDialog.open({template:"<p>Employeee Added Successfully.</p>",plain:true});$scope.data=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})}}]);angular.module("school_erp").controller("evaluationsController",["$http","$scope","globalServices","examServices","subjectsServices","studentServices","ngDialog",function($http,$scope,globalServices,examServices,subjectsServices,studentServices,ngDialog){$scope.evalData=[];$scope.data=[];globalServices.getClass().success(function(data,status){$scope.classDatanew=data.school_classes;$scope.classId=$scope.classDatanew[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.getSubjects($scope.secId)}).error(function(data,success){})};examServices.getExamSchedule().success(function(data,status){$scope.examSchedule=data.exam_schedules;$scope.examScheduleId=$scope.examSchedule[0].exam_sch_id}).error(function(data,success){});$scope.getSubjects=function(secId){subjectsServices.getSubjects(secId).success(function(data,status){$scope.subjectsData=data.subjects;$scope.subjectId=$scope.subjectsData[0].subject_id;$scope.getExamPapers($scope.subjectId,$scope.examScheduleId)}).error(function(data,success){})};$scope.getExamPapers=function(examSubject,exSchedule){examServices.getExamPapers(examSubject,exSchedule).success(function(data,status){$scope.papers=data[exSchedule+"-"+examSubject];$scope.paperId=$scope.papers[0].exam_paper_id;$scope.getStudentValue($scope.secId)}).error(function(data,success){})};$scope.getStudentValue=function(secValue){studentServices.getStudent(secValue).success(function(data,status){$scope.students=data.students;$scope.studentId=$scope.students[0].student_id;$scope.getEvaluation($scope.paperId,$scope.studentId)}).error(function(data,success){})};$scope.getEvaluation=function(examPaper,student){examServices.getEvaluation(examPaper,student).success(function(data,status){$scope.evalData=data[examPaper+"-"+student]}).error(function(data,success){})};$scope.addEvaluation=function(data){var evalDetails={marks:$scope.data.marks,percentage:$scope.data.percentage,conduct:$scope.data.conduct,comment:$scope.data.comment};examServices.setEvaluation(evalDetails,$scope.paperId,$scope.studentId).success(function(data,status){ngDialog.open({template:"<p>ExamPapers are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getEvaluation($scope.paperId,$scope.studentId)}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").controller("examPapersController",["$http","$scope","examServices","ngDialog","globalServices","subjectsServices",function($http,$scope,examServices,ngDialog,globalServices,subjectsServices){$scope.data=[];globalServices.getClass().success(function(data,status){$scope.classDatanew=data.school_classes;$scope.classId=$scope.classDatanew[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.getSubjects($scope.secId)}).error(function(data,success){})};$scope.populateExams=function(){$scope.getExamPapers($scope.subjectId,$scope.examScheduleId)};examServices.getExamSchedule().success(function(data,status){$scope.examSchedule=data.exam_schedules;$scope.examScheduleId=$scope.examSchedule[0].exam_sch_id}).error(function(data,success){});$scope.getExamPapers=function(examSubject,exSchedule){examServices.getExamPapers(examSubject,exSchedule).success(function(data,status){$scope.examData=data[exSchedule+"-"+examSubject]}).error(function(data,success){})};$scope.addExamPapers=function(data){var examDetails={exam_paper_title:$scope.data.exam_paper_title,date:$scope.data.date,start_time:$scope.data.time_from,end_time:$scope.data.time_to,max_marks:$scope.data.max_marks};examServices.setExamPapers(examDetails,$scope.subjectId,$scope.examScheduleId).success(function(data,status){ngDialog.open({template:"<p>ExamPapers are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getExamPapers($scope.subjectId,$scope.examScheduleId)}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getSubjects=function(secId){subjectsServices.getSubjects(secId).success(function(data,status){$scope.subjectsData=data.subjects;$scope.subjectId=$scope.subjectsData[0].subject_id;$scope.getExamPapers($scope.subjectId,$scope.examScheduleId)}).error(function(data,success){})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").factory("examServices",["$http","globalServices",function($http,globalServices){var examServices={};examServices.getExamSchedule=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/exam_schedule/SCH-9271"})};examServices.setExamSchedule=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/exam_schedule/SCH-9271",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};examServices.getExamPapers=function(examSubject,exSchedule){console.log(examSubject+"/"+exSchedule)
;return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/exams/"+examSubject+"/"+exSchedule})};examServices.setExamPapers=function(dataValue,examSubject,exSchedule){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/exams/"+examSubject+"/"+exSchedule,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};examServices.getEvaluation=function(examPaper,student){console.log(examPaper+"/"+student);return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/exam_eval/"+examPaper+"/"+student})};examServices.setEvaluation=function(dataValue,examPaper,student){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/exam_eval/"+examPaper+"/"+student,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};examServices.EditExamSchedule=function(dataValue){console.log(dataValue);return $http({method:"EDIT",url:globalServices.globalValue.baseURL+"api/edit_exam_schedule/SCH-9271-EXM_SCH-39",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return examServices}]);angular.module("school_erp").controller("examSchedulesController",["$http","$scope","examServices","ngDialog","globalServices",function($http,$scope,examServices,ngDialog,globalServices){$scope.examData=[];$scope.today1="01/01/1975";$scope.data=[];globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id}).error(function(data,success){})};$scope.populateExams=function(secId){$scope.getExamPapers($scope.secId)};$scope.getExamScheduleData=function(){examServices.getExamSchedule().success(function(data,status){$scope.examData=data.exam_schedules}).error(function(data,success){})};$scope.addExamSchedule=function(data){var examDetails={exam_title:$scope.data.exam_title,exam_classes:$scope.data.exam_classes,from_date:$scope.data.from_date};examServices.setExamSchedule(examDetails).success(function(data,status){ngDialog.open({template:"<p>ExamSchedules are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getExamScheduleData()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.EditExamSchedule=function(value){$scope.editdata=$scope.examData[value]};$scope.EditExamSchedule=function(editdata){var examDetails={exam_title:$scope.editdata.exam_title,exam_classes:$scope.editdata.exam_classes,from_date:$scope.editdata.from_date};examServices.EditExamSchedule(examDetails).success(function(data,status){ngDialog.open({template:"<p>ExamSchedules are Edited Successfully.</p>",plain:true});$scope.examData=[];$scope.getExamScheduleData()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getExamScheduleData();$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").controller("libraryRulesController",["$http","$scope",function($http,$scope){$scope.libraryRules=[];$scope.getlibraryRules=function(){examServices.getlibraryRules().success(function(data,status){$scope.libraryData=data.boo}).error(function(data,success){})};$scope.addlibraryRules=function(data){var bookDetails={book_title:$scope.data.book_title,author_name:$scope.data.author_name,book_price:$scope.data.book_price,qty:$scope.data.qty,rack_number:$scope.data.rack_number,inward_date:$scope.data.inward_date,book_description:$scope.data.book_description,subject:$scope.data.subject};libraryRulesServices.setlibraryRules(bookDetails).success(function(data,status){ngDialog.open({template:"<p>ExamSchedules are Added Successfully.</p>",plain:true});$scope.data=[];$scope.getlibraryRules()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.EditlibraryRules=function(editdata){var bookDetails={book_title:$scope.data.book_title,author_name:$scope.data.author_name,book_price:$scope.data.book_price,qty:$scope.data.qty,rack_number:$scope.data.rack_number,inward_date:$scope.data.inward_date,book_description:$scope.data.book_description,subject:$scope.data.subject};examServices.EditlibraryRules(bookDetails).success(function(data,status){ngDialog.open({template:"<p>ExamSchedules are Edited Successfully.</p>",plain:true});$scope.examData=[];$scope.getlibraryRules()}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.getlibraryRules();$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").factory("libraryRulesServices",["$http","globalServices",function($http,globalServices){var libraryRulesServices={};libraryRulesServices.getlibraryRules=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/book/"})};libraryRulesServices.setlibraryRules=function(dataValue){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"/api/book/",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};libraryRulesServices.EditlibraryRules=function(dataValue){console.log(dataValue);return $http({method:"EDIT",url:globalServices.globalValue.baseURL+"/book_edit/:book_id/:name/:value",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return libraryRulesServices}]);angular.module("school_erp").factory("authService",["$http","globalServices","$q","$window","$rootScope",function($http,globalServices,$q,$window,$rootScope){var authService={};authService.login=function(dataValue){return $http({method:"POST",url:globalServices.globalValue.baseURL+"signin",data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};authService.logout=function(){$window.localStorage["userInfo"]=null;$window.localStorage["role"]=null};authService.getUserInfo=function(){var userInfo;if($window.localStorage["userInfo"]){userInfo=JSON.parse($window.localStorage["userInfo"]);if(userInfo!=null){$rootScope.role=userInfo.role}else{$rootScope.role="";$window.localStorage["userInfo"]=null}}return userInfo};return authService}]);angular.module("school_erp").controller("loginController",["$http","$scope","$rootScope","authService","$state","ngDialog","$window",function($http,$scope,$rootScope,authService,$state,ngDialog,$window){$scope.datab=[];$scope.login=function(data){var dataValue={email:$scope.datab.username,password:$scope.datab.password};authService.login(dataValue).success(function(data,status){$window.localStorage["userInfo"]=JSON.stringify(data);$rootScope.role=data.role;if(status!=401){$rootScope.loginPage=false;$state.go("main.dashboard")}else{ngDialog.open({template:"<p>"+data+"</p>",plain:true})}}).error(function(data,success){})};$scope.logout=function(){authService.logout();$state.go("login")};$rootScope.loginPage=true}]);angular.module("school_erp").controller("onlineNoticeBoardController",["$http","$scope",function($http,$scope){$scope.employeeData=[];employeeServices.getEmployee().success(function(data,status){$scope.employeeData=data.employee}).error(function(data,success){})}]);angular.module("school_erp").controller("routeGeoLocationController",["$http","$scope",function($http,$scope){$scope.code=900;var mapOptions={zoom:5,center:new google.maps.LatLng(17.745875,83.314301),mapTypeId:google.maps.MapTypeId.TERRAIN};$scope.map=new google.maps.Map(document.getElementById("map"),mapOptions);$scope.markers=[];var image={url:"school_bus.png",scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)};infowindow=new google.maps.InfoWindow;var createMarker=function(lat,lng,id,address){var marker=new google.maps.Marker({map:$scope.map,position:new google.maps.LatLng(lat,lng),animation:google.maps.Animation.DROP,icon:image,title:"Bus Id: "+id+",   address: "+address});google.maps.event.addListener(marker,"click",function(){infowindow.setContent("<h2>"+marker.title+"</h2>");infowindow.open($scope.map,marker)});$scope.map.setZoom(18);$scope.map.panTo(marker.position);$scope.markers.push(marker)};$http.post("http://192.168.1.11:2016/netcomp/getDeviceCodeDetails",{deviceCode:$scope.code},{headers:{"Content-type":"application/json"}}).success(function(data,status){$scope.status=status;$scope.JSONdata=data;console.log(JSON.stringify(data));$scope.latitude=data.positions.latitude;$scope.longitude=data.positions.longitude;$scope.id=data.positions.deviceId;$scope.address=data.positions.address;console.log($scope.latitude);console.log($scope.longitude);createMarker($scope.latitude,$scope.longitude,$scope.id,$scope.address)}).error(function(data,status){$scope.JSONdata=data||"Request failed";$scope.status=status;console.log($scope.data+$scope.status)})}]);angular.module("school_erp").controller("schoolEventsController",["$http","$scope",function($http,$scope){$scope.employeeData=[];employeeServices.getEmployee().success(function(data,status){$scope.employeeData=data.employee}).error(function(data,success){})}]);angular.module("school_erp").factory("globalServices",["$http","$rootScope",function($http,$rootScope){var globalServices={};globalServices.globalValue={baseURL:"http://ec2-52-40-213-254.us-west-2.compute.amazonaws.com:4005/",schoolID:"",role:"teacher"};globalServices.fetchRoleAuth=function(roles){var i=0;var retVal;while(i<=roles.length){if(roles[i]==$rootScope.role){retVal=true;break}else{retVal=false}i++}return retVal};globalServices.getClass=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/school_classes/SCH-9271"})};globalServices.getSections=function(classID){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/class_sections/"+classID})};globalServices.getBusRoutes=function(){return $http({method:"GET",url:globalServices.globalValue.baseURL+"/api/bus_route/SCH-9271"})};return globalServices}]);angular.module("school_erp").controller("headController",["$http","$scope","$rootScope","authService","$state","ngDialog","$window",function($http,$scope,$rootScope,authService,$state,ngDialog,$window){$scope.logout=function(){authService.logout();$state.go("login")}}]);angular.module("school_erp").controller("sideController",["$http","$scope","$rootScope","authService","$state","ngDialog","$window",function($http,$scope,$rootScope,authService,$state,ngDialog,$window){$scope.setRole=function(value){if(value==$rootScope.role){return true}else{return false}}}]);angular.module("school_erp").controller("studentController",["$http","$scope","studentServices","globalServices",function($http,$scope,studentServices,globalServices){$scope.studentData=[];globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.getStudentValue($scope.secId)}).error(function(data,success){})};globalServices.getBusRoutes().success(function(data,status){$scope.routes=data.bus_routes}).error(function(data,success){});$scope.getStudentValue=function(secValue){studentServices.getStudent(secValue).success(function(data,status){$scope.studentData=data.students}).error(function(data,success){})};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").factory("studentServices",["$http","globalServices",function($http,globalServices){var studentServices={};studentServices.getStudent=function(classSecValue){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/students/"+classSecValue})};studentServices.setStudent=function(dataValue,classSecToAdd){return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/students/"+classSecToAdd,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};studentServices.setAttendance=function(dataValue,classToAdd){return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/attendance/"+classToAdd,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};studentServices.getStudents=function(classSecValue){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/students/"+classSecValue})};return studentServices}]);angular.module("school_erp").controller("studentAdmissionController",["$http","$scope","studentServices","ngDialog","globalServices","BusRouteServices",function($http,$scope,studentServices,ngDialog,globalServices,BusRouteServices){$scope.classData=[];$scope.data=[];BusRouteServices.getBusRoute().success(function(data,status){$scope.busRoutes=data.bus_routes;$scope.routeId=$scope.busRoutes[0].route_id}).error(function(data,success){});globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id}).error(function(data,success){})};$scope.addStudent=function(data){var stdAdmission={surname:$scope.data.surname,first_name:$scope.data.first_name,last_name:$scope.data.last_name,gender:$scope.data.gender,dob:$scope.data.dob,aadhar_no:$scope.data.aadhar_no,phone:$scope.data.phone,email:$scope.data.email,category:$scope.data.category,admission_date:$scope.data.admission_date,admission_no:$scope.data.admission_no,roll_no:$scope.data.roll_no,academic_year:$scope.data.academic_year,bus_route_id:$scope.data.bus_route_id,cur_address:$scope.data.cur_address,cur_city:$scope.data.cur_city,cur_state:$scope.data.cur_state,cur_pincode:$scope.data.cur_pincode,cur_long:$scope.data.cur_long,cur_lat:$scope.data.cur_lat,perm_address:$scope.data.perm_address,perm_city:$scope.data.perm_city,perm_state:$scope.data.perm_state,perm_pincode:$scope.data.perm_pincode,perm_long:$scope.data.perm_long,perm_lat:$scope.data.perm_lat,father_name:$scope.data.father_name,father_contact:$scope.data.father_contact,father_occupation:$scope.data.father_occupation,mother_name:$scope.data.mother_name,mother_contact:$scope.data.mother_contact,mother_occupation:$scope.data.mother_occupation,gaurdian_name:$scope.data.gaurdian_name,gaurdian_contact:$scope.data.gaurdian_contact,gaurdian_relation:$scope.data.gaurdian_relation,gaurdian_address:$scope.data.gaurdian_address,gaurdian_occupation:$scope.data.gaurdian_occupation};studentServices.setStudent(stdAdmission,$scope.secId).success(function(data,status){ngDialog.open({template:"<p> Student Information  submitted successfully </p>",plain:true});$scope.data=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.addParent=function(studentId){var parentDetails={parent_name:$scope.parent[0].parent_name,parent_contact:$scope.parent[0].parent_contact,parent_relation:$scope.parent[0].parent_relation};studentServices.setParent(parentDetails,studentId).success(function(data,status){$scope.parent=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.addStudentaddress=function(studentId){var parentDetails={cur_address:$scope.Studentaddress.cur_address,perm_address:$scope.Studentaddress.perm_address,bus_route_id:$scope.Studentaddress.bus_route_id,Aadhaar_no:$scope.Studentaddress.Aadhaar_no};studentServices.setStudentaddress(Studentaddress,studentId).success(function(data,status){ngDialog.open({template:"<p>Student Information  submitted successfully </p>",plain:true});$scope.parent=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})}}]);angular.module("school_erp").controller("studentAttendanceController",["$http","$scope","studentServices","globalServices","ngDialog",function($http,$scope,studentServices,globalServices,ngDialog){$scope.studentData=[];$scope.classDatanew=[];$scope.all=[];globalServices.getClass().success(function(data,status){$scope.classDatanew=data.school_classes;$scope.classId=$scope.classDatanew[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){$scope.secData=data.class_sections;$scope.secId=$scope.secData[0].section_id;$scope.getStudents($scope.secId)}).error(function(data,success){})};$scope.getStudents=function(classSecValue){studentServices.getStudents(classSecValue).success(function(data,status){$scope.studentData=data.students}).error(function(data,success){})};$scope.addAttendance=function(studentVal,status){var Attendance={class_id:$scope.classId,section_id:$scope.secId,session:"morning",status:status};console.log(Attendance);studentServices.setAttendance(Attendance,studentVal.student_id).success(function(data,status){ngDialog.open({template:"<p> Student Attendance  submitted successfully </p>",plain:true});$scope.data=[]}).error(function(data,success){ngDialog.open({template:"<p>Some Error Occured!</p>",plain:true})})};$scope.students=[];$scope.attn=function(student,status){var noMatch=true;var obj={student_id:student.student_id,status:status};var students;while(students.student_id==student.student_id){students.status=status}};$scope.attendanceStatus=function(){$scope.studentData.forEach(function(element){var obj={student_id:element.student_id,status:"None"};$scope.all.push(obj)});console.log($scope.all)}}]);angular.module("school_erp").controller("studentDetailsController",["$http","$scope",function($http,$scope){$scope.StudentDetails=[];employeeServices.getStudentDetails().success(function(data,status){$scope.StudentDetails=data.Students}).error(function(data,success){})}]);angular.module("school_erp").controller("subjectsController",["$http","$scope","subjectsServices","ngDialog","globalServices",function($http,$scope,subjectsServices,ngDialog,globalServices){$scope.subjectsData=[];$scope.data=[];$scope.classData=[];$scope.secId="";$scope.secData=[];$scope.classId="";globalServices.getClass().success(function(data,status){$scope.classData=data.school_classes;$scope.classId=$scope.classData[0].class_id;$scope.populateSections($scope.classId)}).error(function(data,success){});$scope.populateSections=function(classId){globalServices.getSections(classId).success(function(data,status){console.log($scope.secId);$scope.secData=data.class_sections;$scope.getSubjects($scope.secId)}).error(function(data,success){})};$scope.getSubjects=function(secId){subjectsServices.getSubjects(secId).success(function(data,status){$scope.subjectsData=data.subjects}).error(function(data,success){})};$scope.addSubjects=function(data){console.log($scope.secId);var Subjects={_id:"",subject_id:$scope.data.subject_id,class_id:"",name:$scope.data.name}};$scope.showRole=function(role){return globalServices.fetchRoleAuth(role)}}]);angular.module("school_erp").factory("subjectsServices",["$http","globalServices",function($http,globalServices){var subjectsServices={};subjectsServices.getSubjects=function(secID){return $http({method:"GET",url:globalServices.globalValue.baseURL+"api/subjects/"+secID})};subjectsServices.setSubjects=function(dataValue,secID){console.log(dataValue);return $http({method:"POST",url:globalServices.globalValue.baseURL+"api/subjects/"+secID,data:$.param(dataValue),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};return subjectsServices}]);angular.module("school_erp").controller("teacherWiseController",["$http","$scope",function($http,$scope){$scope.employeeData=[];employeeServices.getEmployee().success(function(data,status){$scope.employeeData=data.employee}).error(function(data,success){})}]);